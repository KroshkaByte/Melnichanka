{% extends 'base.html' %}

{% block title %}VoiceParseHub{% endblock %}

{% block content %}
    <div class="container">
        <header>
            <h1>Ваш Голос, Ваш Excel: VoiceParseHub.com - Новый Уровень Табличной Продуктивности!</h1>
        </header>
        <main>
            {% if user.is_authenticated %}
                <section class="user-section">
                    <p>Привет, {{ user.username }}!</p>

                    <section class="recognition-section">
                        <button id="start-recognition">Начать распознавание</button>
                        <div id="result"></div>

                        <script>
                            $(document).ready(function() {
                                $('#start-recognition').click(function() {
                                    $.ajax({
                                        type: 'GET',
                                        url: '/recognize_speech/',
                                        success: function(response) {
                                            if (response.success) {
                                                $('#result').text('Вы сказали: ' + response.text);
                                            } else {
                                                $('#result').text('Ошибка: ' + response.error);
                                            }
                                        },
                                        error: function(error) {
                                            console.log(error);
                                        }
                                    });
                                });
                            });
                        </script>
                    </section>
                    <p><a href="{% url 'logout' %}">Выйти</a></p>
                </section>
            {% else %}
                <section class="login-signup">
                    <div class="login">
                        <a href="{% url 'login' %}" class="button button-large">
                            <span class="text">Войти</span>
                        </a>
                    </div>
                    <div class="signup">
                        <a href="{% url 'signup' %}" class="button button-large">
                            <span class="text">Зарегистрироваться</span>
                        </a>
                    </div>
                </section>
            {% endif %}
        </main>

        <footer>
            <p>&copy; VoiceParseHub</p>
        </footer>
    </div>
{% endblock %}
